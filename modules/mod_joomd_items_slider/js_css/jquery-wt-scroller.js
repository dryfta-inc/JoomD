(function(c){var p;c.fn.undoChanges=function(){p.undoChanges();return this};c.fn.updateChanges=function(){p.updateChanges();return this};c.fn.setCtrlType=function(x){p.setCtrlType(x);return this};c.fn.setButtons=function(x){p.setButtons(x);return this};c.fn.setBtnsMouseover=function(x){p.setBtnsMouseover(x);return this};c.fn.setCaption=function(x){p.setCaption(x);return this};c.fn.setCapMouseover=function(x){p.setCapMouseover(x);return this};c.fn.setCapEffect=function(x){p.setCapEffect(x);return this};c.fn.setCapPosition=function(x,y){p.setCapPosition(x,y);return this};c.fn.setEasing=function(x){p.setEasing(x);return this};q.prototype.undoChanges=function(){this.stopTimer();this._$obj.empty();this._$obj.append(this._$cloneDom)};q.prototype.updateChanges=function(){this.init()};q.prototype.setCtrlType=function(x){this._ctrlType=x};q.prototype.setButtons=function(x){this._displayButtons=x};q.prototype.setBtnsMouseover=function(x){this._mouseoverButtons=window.Touch?false:x};q.prototype.setCaption=function(x){this._displayCaption=x};q.prototype.setCapMouseover=function(x){this._mouseoverCaption=window.Touch?false:x};q.prototype.setCapEffect=function(x){this._captionEffect=x};q.prototype.setCapPosition=function(x,y){this._captionPos=x;this._captionAlign=y};q.prototype.setEasing=function(x){this._easing=x};var o="top";var i="bottom";var l="outside";var f="inside";var v=0.8;var n=1000;var a=600;var m=300;var k=4000;var e=50;var w="update_buttons";var r="update_thumb";var g="update_index";var d="update_text";var j="start_timer";var u="lightbox_open";var s="lightbox_close";function q(y,x){this._numDisplay=b(x.num_display,3);this._slideWidth=b(x.slide_width,300);this._slideHeight=b(x.slide_height,200);this._slideMargin=t(x.slide_margin,1);this._margin=t(x.margin,10);this._buttonWidth=b(x.button_width,35);this._ctrlHeight=b(x.ctrl_height,20);this._autoScroll=x.auto_scroll;this._delay=b(x.delay,k);this._duration=b(x.scroll_speed,n);this._easing=x.easing;this._autoScale=x.auto_scale;this._displayButtons=x.display_buttons;this._mouseoverButtons=window.Touch?false:x.mouseover_buttons;this._ctrlType=x.ctrl_type.toLowerCase();this._displayCaption=x.display_caption;this._mouseoverCaption=window.Touch?false:x.mouseover_caption;this._captionPos=x.caption_position.toLowerCase();this._captionAlign=x.caption_align.toLowerCase();this._moveBy1=x.move_one;this._contNav=x.cont_nav;this._shuffle=x.shuffle;this._mousewheelScroll=x.mousewheel_scroll;this._playOnce=x.play_once;this._captionEffect=x.caption_effect.toLowerCase();this._$scroller;this._$slidePanel;this._$slideList;this._$slides;this._$prevBtn;this._$nextBtn;this._$cbar;this._$indexes;this._$scrollbar;this._$thumb;this._numItems;this._unitSize;this._prevSlots;this._nextSlots;this._maxSlots;this._range;this._pos;this._timerId;this._extOffset;this._extHeight;this._prevPct;this._slideCoord;this._$obj=y;this._$cloneDom;this.init()}q.prototype.init=function(){this._$cloneDom=this._$obj.find(">div:first").clone();this._$scroller=c(".wt-scroller",this._$obj);this._$slidePanel=this._$scroller.find(">.slides");this._$slideList=this._$slidePanel.find(">ul:first");this._$slides=this._$slideList.find(">li");this._$cbar=this._$scroller.find(">.lower-panel");this._$prevBtn=this._$scroller.find(">.prev-btn");this._$nextBtn=this._$scroller.find(">.next-btn");this._extOffset=0;this._extHeight=0;this._pos=0;this._prevPct=-1;this._timerId=null;this._numItems=this._$slides.size();if(this._numItems<=this._numDisplay){this._displayButtons=false;this._ctrlType="none";this._numDisplay=this._numItems}if(this._ctrlType=="index"){this._moveBy1=false}if(this._shuffle){this.shuffleItems()}this.initItems();this.initSlidePanel();this.initCtrls();this._$scroller.css({width:this._$slidePanel.width()+this._$prevBtn.outerWidth(true)+this._$nextBtn.outerWidth(true),height:this._$slidePanel.height()+this._$cbar.outerHeight(),paddingTop:this._margin});this.updateCPanel();if(window.Touch){this._slideCoord={start:-1,end:-1};this._$slidePanel.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove).bind("touchend",{elem:this},this.touchEnd)}else{if(this._mousewheelScroll){this._$scroller.bind("mousewheel",{elem:this},this.scrollContent).bind("DOMMouseScroll",{elem:this},this.scrollContent)}}c(document).bind(s,{elem:this},this.onFocus).bind(u,{elem:this},this.onBlur);this._$scroller.trigger(s)};q.prototype.initItems=function(){this.initCaptions();for(var z=0;z<this._numItems;z++){var A=this._$slides.eq(z);var y;var x=A.find(">a:first");if(x.size()==0){A.click(h);x.css("cursor","default");y=A.find(">img")}else{x.data("text",A.find(">p:first").html());y=x.find(">img")}if(y.size()>0){if(y[0].complete||y[0].readyState=="complete"){this.processImg(y)}else{y.bind("load",{elem:this},this.processLoadedImg)}}if(this._displayCaption&&this._captionPos==f){this.initCaption(A)}}};q.prototype.initCaptions=function(){var x=this._$slides.find(">p:first");if(this._displayCaption){var A=x.outerWidth()-x.width();x.css({width:this._slideWidth-A,visibility:"visible"}).click(h);if(this._captionPos==l){var z=x.map(function(){return c(this).height()}).get();var y=Math.max.apply(Math,z);x.css({top:this._captionAlign==o?0:this._slideHeight,height:y});this._extHeight=x.outerHeight();if(this._captionAlign==o){this._extOffset=this._extHeight}x.addClass("outside")}else{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)>6&&parseInt(jQuery.browser.version)<9){x.addClass("ie-inside")}else{x.addClass("inside")}}}else{x.hide()}};q.prototype.initCaption=function(x){var y=x.find(">p:first");if(y.size()==0||y.html()==""){y.remove();return}y.css("top",this._captionAlign==o?0:this._slideHeight-y.outerHeight());if(this._mouseoverCaption){switch(this._captionEffect){case"slide":y.css("top",this._captionAlign==o?-y.outerHeight():this._slideHeight);x.bind("mouseenter",{elem:this},this.slideInCaption).bind("mouseleave",{elem:this},this.slideOutCaption);break;case"fade":y.css("opacity",0);x.bind("mouseenter",{elem:this},this.fadeInCaption).bind("mouseleave",{elem:this},this.fadeOutCaption);break;default:y.css("visibility","hidden");x.bind("mouseenter",this.showCaption).bind("mouseleave",this.hideCaption)}}};q.prototype.initSlidePanel=function(){this._$slides.css({width:this._slideWidth,height:this._slideHeight+this._extHeight,marginRight:this._slideMargin}).bind("mouseenter",{elem:this},this.itemMouseover).bind("mouseleave",{elem:this},this.itemMouseout);this._$slidePanel.css({width:(this._numDisplay*this._$slides.width())+((this._numDisplay-1)*this._slideMargin),height:this._$slides.height()});this._unitSize=this._$slides.outerWidth(true);var x=(this._ctrlType=="index")?(this._numDisplay*Math.ceil(this._numItems/this._numDisplay)):this._numItems;this._$slideList.width(x*this._unitSize);this._maxSlots=x-this._numDisplay;this._prevSlots=0;this._nextSlots=this._maxSlots;this._range=((this._$slideList.width()-this._slideMargin)-this._$slidePanel.width())};q.prototype.initCtrls=function(){this.initButtons();this._$cbar.css({width:this._$slidePanel.width(),paddingLeft:this._$prevBtn.outerWidth(true),paddingRight:this._$nextBtn.outerWidth(true)});switch(this._ctrlType){case"scrollbar":this.initScrollbar();var x=Math.max((this._ctrlHeight-this._$scrollbar.height())/2,0);this._$cbar.css({paddingTop:x,paddingBottom:x});break;case"index":this.initIndexes();var x=Math.max((this._ctrlHeight-this._$indexes.height())/2,0);this._$cbar.css({paddingTop:x,paddingBottom:x});break;default:this._$cbar.remove();this._$scroller.css("paddingBottom",this._margin)}};q.prototype.initButtons=function(){if(this._displayButtons){if(this._mouseoverButtons){this.removeButtons();this._$slidePanel.append("<div class='m-prev'>&laquo;</div><div class='m-next'>&raquo;</div>");var A=this._$slidePanel.find(">.m-prev").mousedown(h).bind("click",{elem:this},this.moveBack);var z=this._$slidePanel.find(">.m-next").mousedown(h).bind("click",{elem:this},this.moveFwd);if(!window.Touch){A.css("left",-A.width());z.css("marginLeft",0);this._$slidePanel.hover(function(){A.stop(true).animate({left:0},m);z.stop(true).animate({marginLeft:-z.width()},m)},function(){A.stop(true).animate({left:-A.width()},m);z.stop(true).animate({marginLeft:0},m)})}if(!this._contNav){this._$scroller.bind(w,{elem:this,prevBtn:A,nextBtn:z},this.updateButtons)}}else{var x=Math.max(Math.round((this._buttonWidth-this._$prevBtn.width())/2),0);var y=Math.max(this._buttonWidth-x-this._$prevBtn.width(),0);this._$prevBtn.css({marginLeft:x,marginRight:y,height:this._$slidePanel.height()}).mousedown(h).bind("click",{elem:this},this.moveBack);this._$nextBtn.css({marginLeft:y,marginRight:x,height:this._$slidePanel.height()}).mousedown(h).bind("click",{elem:this},this.moveFwd);if(!this._contNav){this._$scroller.bind(w,{elem:this,prevBtn:this._$prevBtn,nextBtn:this._$nextBtn},this.updateButtons)}}}else{this.removeButtons()}};q.prototype.removeButtons=function(){this._$prevBtn.remove();this._$nextBtn.remove();this._$scroller.css({paddingLeft:this._margin,paddingRight:this._margin})};q.prototype.updateButtons=function(A){var y=A.data.elem;var x=Math.abs(y._pos/y._unitSize);var z=x+y._numDisplay;A.data.prevBtn.toggleClass("off",x<=0);A.data.nextBtn.toggleClass("off",z>=y._numItems)};q.prototype.initScrollbar=function(){var z=this;this._$cbar.append("<div class='scroll-bar'><div class='thumb'></div></div>");this._$scrollbar=this._$cbar.find(">.scroll-bar");this._$thumb=this._$scrollbar.find(">.thumb");this._$scrollbar.width(this._$cbar.width()).bind("click",{elem:this},this.trackClick).mousedown(h);this._$thumb.width(Math.ceil((this._numDisplay/this._numItems)*this._$scrollbar.width())).click(h);var x=this._$scrollbar.width()-this._$thumb.width();var A=this._range/x;try{this._$thumb.draggable({containment:"parent"}).bind("drag",function(){z._$slideList.css({left:Math.round(-z._$thumb.position().left*A)})}).bind("dragstop",function(){z.autoStop(z._$thumb.position().left/x)})}catch(y){}this._$scroller.bind(r,function(){var B=Math.round(Math.abs(z._pos)/A);z._$thumb.stop(true,true).animate({left:B},z._duration,z._easing)})};q.prototype.initIndexes=function(){var B=Math.ceil(this._numItems/this._numDisplay);var A="";for(var z=0;z<B;z++){var y=z*this._numDisplay;var x=Math.min(y+this._numDisplay,this._numItems);A+="<span class='index' title='"+((y+1)+"-"+x)+"'></span>"}this._$cbar.prepend(A);this._$indexes=this._$cbar.find(".index").mousedown(h).bind("click",{elem:this},this.goToIndex);this._$scroller.bind(g,{elem:this},this.updateIndexes)};q.prototype.updateIndexes=function(z){var y=z.data.elem;var x=Math.ceil(y._prevSlots/y._numDisplay);y._$indexes.filter(".index-hl").removeClass("index-hl");y._$indexes.eq(x).addClass("index-hl")};q.prototype.updateSlideList=function(){var x=this;this._pos=-this._prevSlots*this._unitSize;this._$slideList.stop(true,true).animate({left:this._pos},this._duration,this._easing,function(){x._$scroller.trigger(j)});this.updateCPanel();if(this._playOnce){this.pauseLast()}};q.prototype.updateCPanel=function(){this._$scroller.trigger(w).trigger(r).trigger(g)};q.prototype.trackClick=function(y){var x=y.data.elem;x.autoStop((y.pageX-x._$scrollbar.offset().left)/x._$scrollbar.width())};q.prototype.autoStop=function(A){if(A!=this._prevPct){this._prevPct=A;var x;var y=A*this._range;if(y>Math.abs(this._pos)){x=Math.ceil(y/this._unitSize)}else{if(y<Math.abs(this._pos)){x=Math.floor(y/this._unitSize)}else{return}}var z=x+(this._pos/this._unitSize);this._prevSlots+=z;this._nextSlots-=z;this.updateSlideList()}};q.prototype.goToIndex=function(y){var x=y.data.elem;x.stopTimer();x._prevSlots=c(this).index()*x._numDisplay;x._nextSlots=x._maxSlots-x._prevSlots;x.updateSlideList();return false};q.prototype.moveBack=function(z){var y=(typeof z!="undefined")?z.data.elem:this;y.stopTimer();if(y._nextSlots<y._maxSlots){var x=y._moveBy1?1:Math.min(y._maxSlots-y._nextSlots,y._numDisplay);y._nextSlots+=x;y._prevSlots-=x}else{if(y._contNav){y._nextSlots=0;y._prevSlots=y._maxSlots}else{return}}y.updateSlideList()};q.prototype.moveFwd=function(z){var y=(typeof z!="undefined")?z.data.elem:this;y.stopTimer();if(y._prevSlots<y._maxSlots){var x=y._moveBy1?1:Math.min(y._maxSlots-y._prevSlots,y._numDisplay);y._prevSlots+=x;y._nextSlots-=x}else{if(y._contNav){y._prevSlots=0;y._nextSlots=y._maxSlots}else{return}}y.updateSlideList()};q.prototype.processLoadedImg=function(x){x.data.elem.processImg(c(this))};q.prototype.processImg=function(x){if(this._autoScale&&x.width()>0&&x.height()>0){var y=x.height()/x.width();x.css({width:this._slideWidth,height:y*this._slideWidth});if(x.height()>this._slideHeight){x.css({width:(1/y)*this._slideHeight,height:this._slideHeight})}}x.css({left:Math.round((this._slideWidth-x.width())/2),top:this._extOffset+Math.round((this._slideHeight-x.height())/2)})};q.prototype.onBlur=function(y){var x=y.data.elem;x._$scroller.unbind(j).unbind("mouseenter").unbind("mouseleave");x.stopTimer()};q.prototype.onFocus=function(y){var x=y.data.elem;if(x._autoScroll){x._$scroller.bind(j,{elem:x},x.startTimer).bind("mouseenter",{elem:x},x.scrollerOver).bind("mouseleave",{elem:x},x.scrollerOut).trigger(j)}};q.prototype.itemMouseover=function(x){c(this).find("img:first").stop().animate({opacity:v},m)};q.prototype.itemMouseout=function(y){var x=y.data.elem;c(this).find("img:first").stop().animate({opacity:1},m,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}})};q.prototype.slideInCaption=function(y){var x=y.data.elem;var z=c(this).find(">p:first");z.stop().animate({top:x._captionAlign==i?x._slideHeight-z.outerHeight():0},m)};q.prototype.slideOutCaption=function(y){var x=y.data.elem;var z=c(this).find(">p:first");z.stop().animate({top:x._captionAlign==i?x._slideHeight:-z.outerHeight()},m)};q.prototype.fadeInCaption=function(x){c(this).find(">p:first").stop(true).animate({opacity:1},m)};q.prototype.fadeOutCaption=function(x){c(this).find(">p:first").stop(true).animate({opacity:0},m)};q.prototype.showCaption=function(){c(this).find(">p:first").css("visibility","visible")};q.prototype.hideCaption=function(){c(this).find(">p:first").css("visibility","hidden")};q.prototype.scrollerOver=function(y){var x=y.data.elem;x._$scroller.unbind(j);x.stopTimer()};q.prototype.scrollerOut=function(y){var x=y.data.elem;x._$scroller.bind(j,{elem:x},x.startTimer).trigger(j)};q.prototype.shuffleItems=function(){var z=this._$slides.toArray();for(var A=0;A<this._numItems;A++){var x=Math.floor(Math.random()*this._numItems);var y=z[A];z[A]=z[x];z[x]=y}for(var A=0;A<this._numItems;A++){this._$slideList.append(c(z[A]))}this._$slides=this._$slideList.find(">li")};q.prototype.startTimer=function(y){var x=y.data.elem;if(x._timerId==null){x._timerId=setTimeout(function(){x.stopTimer();if(x._prevSlots<x._maxSlots){var z=x._moveBy1?1:Math.min(x._maxSlots-x._prevSlots,x._numDisplay);x._prevSlots+=z;x._nextSlots-=z}else{x._prevSlots=0;x._nextSlots=x._maxSlots}x.updateSlideList()},x._delay)}};q.prototype.stopTimer=function(){clearTimeout(this._timerId);this._timerId=null};q.prototype.pauseLast=function(x){if(this._prevSlots==this._maxSlots){this._autoScroll=false;this._$scroller.unbind(j).unbind("mouseenter").unbind("mouseleave");this.stopTimer()}};q.prototype.scrollContent=function(y){var x=y.data.elem;if(!x._$slideList.is(":animated")){var z=(typeof y.originalEvent.wheelDelta=="undefined")?-y.originalEvent.detail:y.originalEvent.wheelDelta;z>0?x.moveBack():x.moveFwd()}return false};q.prototype.touchStart=function(x){x.data.elem._slideCoord.start=x.originalEvent.touches[0].pageX};q.prototype.touchMove=function(x){x.preventDefault();x.data.elem._slideCoord.end=x.originalEvent.touches[0].pageX};q.prototype.touchEnd=function(y){var x=y.data.elem;if(x._slideCoord.end>=0){if(Math.abs(x._slideCoord.start-x._slideCoord.end)>e){if(x._slideCoord.end<x._slideCoord.start){x.moveFwd()}else{x.moveBack()}}}x._slideCoord.start=x._slideCoord.end=-1};function h(){return false}function b(x,y){if(!isNaN(x)&&x>0){return x}return y}function t(x,y){if(!isNaN(x)&&x>=0){return x}return y}c.fn.wtScroller=function(z){var y={num_display:3,slide_width:300,slide_height:200,slide_margin:1,button_width:35,ctrl_height:20,margin:10,auto_scroll:true,delay:k,scroll_speed:n,easing:"",auto_scale:true,move_one:false,ctrl_type:"scrollbar",display_buttons:true,mouseover_buttons:false,display_caption:true,mouseover_caption:false,caption_align:i,caption_position:f,cont_nav:true,shuffle:false,mousewheel_scroll:false,play_once:false,caption_effect:"slide"};var x=c.extend(true,{},y,z);return this.each(function(){p=new q(c(this),x)})}})(jQuery);